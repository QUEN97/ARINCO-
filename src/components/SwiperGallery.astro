---
import { Swiper, SwiperSlide } from 'swiper/astro';
import { Navigation, Pagination, Autoplay, Thumbs } from 'swiper/modules';
import 'swiper/css';
import 'swiper/css/navigation';
import 'swiper/css/pagination';
import 'swiper/css/thumbs';

interface Props {
  images: string[];
  titles?: string[];
  showThumbs?: boolean;
}

const { images, titles = [], showThumbs = false } = Astro.props;
---

<div class="swiper-container">
  <Swiper
    modules={[Navigation, Pagination, Autoplay, ...(showThumbs ? [Thumbs] : [])]}
    navigation
    pagination={{ clickable: true }}
    spaceBetween={20}
    slidesPerView={1}
    autoplay={{ delay: 5000 }}
    loop
    thumbs={{ swiper: showThumbs ? thumbsSwiper : null }}
  >
    {images.map((image, index) => (
      <SwiperSlide key={index}>
        <img
          src={image}
          alt={titles[index] || `Imagen ${index + 1}`}
          class="w-full h-[70vh] object-contain bg-gray-100 rounded-lg"
          loading="lazy"
        />
        {titles[index] && (
          <div class="absolute bottom-0 left-0 right-0 bg-black/50 text-white p-4 text-center">
            {titles[index]}
          </div>
        )}
      </SwiperSlide>
    ))}
  </Swiper>

  {showThumbs && (
    <Swiper
      modules={[Thumbs]}
      watchSlidesProgress
      slidesPerView={4}
      spaceBetween={10}
      class="mt-4 thumb-swiper"
    >
      {images.map((image, index) => (
        <SwiperSlide key={index}>
          <img
            src={image}
            alt={`Thumbnail ${index + 1}`}
            class="w-full h-24 object-cover rounded cursor-pointer"
            loading="lazy"
          />
        </SwiperSlide>
      ))}
    </Swiper>
  )}
</div>

<style>
  .swiper-container {
    --swiper-navigation-color: #3b82f6; /* color primary */
    --swiper-pagination-color: #3b82f6;
    --swiper-pagination-bullet-size: 12px;
    --swiper-pagination-bullet-horizontal-gap: 6px;
  }
  
  .thumb-swiper .swiper-slide-thumb-active {
    opacity: 0.7;
    border: 2px solid var(--swiper-navigation-color);
  }
</style>